<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>放大镜</title>
		<link rel="stylesheet" type="text/css" href="css/shouye.css"/>
		<link rel="stylesheet" href="css/showBigImg/showBigImg.css" />
	</head>
	<body>
		<!--头部-->
		<div id = 'head'>
			
			<div id="headerTop">
				<div class="headerContent">
					<div class = 'headerTop_right'>
						<span>网站公告</span>
						<img src="img/w1.jpg" alt="" />
						<img src="img/w2.jpg" alt="" />
					</div>
					<div class = 'headerTop_left'>
						<span>您好!欢迎光临凡客诚品！ </span>&nbsp;	
						<span><a href="login.html">登录</a></span>&emsp;
						<span>|</span>&emsp;	
						<span><a href="register.html">注册</a></span>&nbsp;
						<span>我的订单</span>
					</div>
				</div>
			</div>
			<!--头部搜索-->
			<div id="logoSearch">
				<div class = 'loginArea'>
					<div class = 'search'>
						<div class = 'searchTab'>
							<div class = 'searchF1'>
								<input type="text" id = 'input1' placeholder="搜“帆布鞋”，体验与众不同" />
								<input type="button" id = 'input2' value="搜索" style = 'background: red;border:none'/>
							</div>
							<div class = 'shoping'>
								<a href="shopCart.html" class = 'linka'>
									<p style = 'cursor:pointer;font-size:15px;color:white;text-align: center;line-height: 25px;'>
										购物车
										<span class = 'cartGoodsNum' style = 'color:blue;'>
											0
										</span>
									</p>
								</a>
							</div>
						</div>
						<div class = 'searchHart'>
							<ul>
								<li> 热门搜索：</li>
								<li><a href="">免烫衬衫</a></li>
								<li><a href="">水柔棉</a></li>
								<li><a href="">熊本熊</a></li>
								<li><a href="">麻衬衫</a></li>
								<li><a href="">帆布鞋</a></li>
								<li><a href="">运动户外</a></li>
								<li><a href="">家居</a></li>
							</ul>
						</div>
					</div>
				</div>
			</div>
			
			<!--头部导航-->
			<div id = 'navList'>
				
				<ul>
					<li class = 'logoImg'><a href="#"><img src="img/logo.png" alt="" /></a></li>
					
					<li class = 'a'>
						<a href="">首页</a>
						<span class = 'navLine'></span>
					</li>
					<li>
						<a href="">衬衫</a>
						<span class = 'navLine'></span>
						<ul class = 'censhan'>
							<li>免烫</li>
							<li>易打理</li>
							<li>休闲</li>
							<li>高职</li>
							<li>法兰绒</li>
							<li>牛仔</li>
							<li>青年布</li>
							<li>麻</li>
							<li>水棉麻</li>
							<li>泡泡纱</li>
						</ul>
					</li>
					<li>
						<a href="">T恤</a>
						<span class = 'navLine'></span>
						<ul class = 'txu'>
							<li>免烫</li>
							<li>易打理</li>
							<li>休闲</li>
							<li>高职</li>
							<li>法兰绒</li>
							<li>青年布</li>
							<li>麻</li>
							<li>水棉麻</li>
							<li>泡泡纱</li>
						</ul>
					</li>
					<li>
						<a href="">卫衣</a>
						<span class = 'navLine'></span>
						<ul class = 'weiyi'>
							<li>免烫</li>
							<li>易打理</li>
							<li>休闲</li>
							<li>高职</li>
							<li>法兰绒</li>
							<li>青年布</li>
							<li>麻</li>
							<li>水棉麻</li>
							<li>泡泡纱</li>
						</ul>
					</li>
					<li>
						<a href="">外套</a>
						<span class = 'navLine'></span>
						<ul class = 'waitao'>
							<li>免烫</li>
							<li>易打理</li>
							<li>休闲</li>
							<li>高职</li>
							<li>法兰绒</li>
							<li>青年布</li>
							<li>麻</li>
							<li>水棉麻</li>
							<li>泡泡纱</li>
						</ul>
					</li>
					<li>
						<a href="">针织衫</a>
						<span class = 'navLine'></span>
						<ul class = 'zzshan'>
							<li>免烫</li>
							<li>易打理</li>
							<li>休闲</li>
							<li>青年布</li>
							<li>麻</li>
							<li>水棉麻</li>
							<li>泡泡纱</li>
						</ul>
					</li>
					<li>
						<a href="">裤装</a>
						<span class = 'navLine'></span>
						<ul class = 'kuz'>
							<li>免烫</li>
							<li>易打理</li>
							<li>休闲</li>
							<li>高职</li>
							<li>法兰绒</li>
							<li>青年布</li>
							<li>麻</li>
							<li>高职</li>
							<li>法兰绒</li>
							<li>水棉麻</li>
							<li>泡泡纱</li>
						</ul>
					</li>
					<li>
						<a href="">鞋</a>
						<span class = 'navLine'></span>
						<ul class = 'xie'>
							<li>免烫</li>
							<li>易打理</li>
							<li>休闲</li>
							<li>法兰绒</li>
							<li>青年布</li>
							<li>麻</li>
							<li>高职</li>
							<li>法兰绒</li>
							<li>水棉麻</li>
							<li>泡泡纱</li>
						</ul>
					</li>
					<li>
						<a href="">家居配饰</a>
						<span class = 'navLine'></span>
						<ul class = 'jiaju'>
							<li>免烫</li>
							<li>易打理</li>
							<li>休闲</li>
							<li>青年布</li>
							<li>麻</li>
							<li>水棉麻</li>
							<li>泡泡纱</li>
						</ul>
					</li>
					<li>
						<a href="">内衣袜品</a>
						<ul class = 'neiy'>
							<li>免烫</li>
							<li>易打理</li>
							<li>休闲</li>
							<li>高职</li>
							<li>法兰绒</li>
							<li>青年布</li>
							<li>麻</li>
							<li>法兰绒</li>
							<li>青年布</li>
							<li>麻</li>
							<li>水棉麻</li>
							<li>泡泡纱</li>
							<li>水棉麻</li>
							<li>泡泡纱</li>
						</ul>
					</li>
				</ul>
				
			</div>		
		</div>
		
		<div id="content">
			<div class="shopBox">
				<div class="shopPosition">
					<div class="left">当前位置：<span>所有分类</span></div>
					<div class="right">找到和披肩相关商品12件</div>
				</div>
				<div class="typearea">
					<div class="xiebao">
						鞋包	
					</div>
					<div class="fushi">
						服饰	(11)		
					</div>					
				</div>
				<div class = 'showImg'>
					<img src="imgQt/fandajing1.png" alt="" />
				</div>
				
			<!--展示图片-->	
				<div class="showImg1">
					
					<ul class = 'ulShowImg'>
						<li>
							<a href="bigGlass.html"><img src="imgQt/showImg.jpg" class = 'img1'/></a>
							<p>
								凡客发热纤维披肩盖毯 中灰色<br>
								<span>售价￥80</span>
							</p>
							<div class="tehui">
								70
							</div>
							<button class="buy">
								立即购买
							</button>
							<div class="hoverImg">
								<img src="imgQt/hoverImg.png" alt="" />
							</div>
						</li>
						<li>
							<a href="bigGlass.html"><img src="imgQt/showImg2.jpg" class = 'img1'/></a>
							<p>凡客发热纤维披肩盖毯 中灰色<br><span>售价￥90</span></p>
							<div class="tehui">
								23
							</div>
							<button class="buy">
								立即购买
							</button>
							<div class="hoverImg">
								<img src="imgQt/hover2.png" alt="" />
							</div>
						</li>
						<li><a href="bigGlass.html"><img src="imgQt/showImg3.jpg" class = 'img1'/></a>
								<p>凡客发热纤维披肩盖毯 中灰色<br><span>售价￥70</span></p>
							<div class="tehui">
								23
							</div>
							<button class="buy">
								立即购买
							</button>
							<div class="hoverImg">
								<img src="imgQt/hover3.jpg" alt="" />
							</div>
						</li>
						<li><a href="bigGlass.html"><img src="imgQt/showImg4.jpg" class = 'img1'/></a>
								<p>凡客发热纤维披肩盖毯 中灰色<br><span>售价￥70</span></p>
							<div class="tehui">
								23
							</div>
							<button class="buy">
								立即购买
							</button>
							<div class="hoverImg">
								<img src="imgQt/hover4.png" alt="" />
							</div>
						</li>
						<li class = 'liLast1'><a href="bigGlass.html"><img src="imgQt/showImg5.jpg" class = 'img1'/></a>
								<p>凡客发热纤维披肩盖毯 中灰色<br><span>售价￥97</span></p>
							<div class="tehui">
								23
							</div>
							<button class="buy">
								立即购买
							</button>
							<div class="hoverImg">
								<img src="imgQt/hover4.png" alt="" />
							</div>
						</li>
						<li><a href="bigGlass.html"><img src="imgQt/showImg6.jpg" class = 'img1'/></a>
								<p>凡客发热纤维披肩盖毯 中灰色<br><span>售价￥97</span></p>
							<div class="tehui">
								23
							</div>
							<button class="buy">
								立即购买
							</button>
							<div class="hoverImg">
								<img src="imgQt/hover5.png" alt="" />
							</div>
						</li>
						<li><a href="bigGlass.html"><img src="imgQt/showImg7.jpg" class = 'img1'/></a>
								<p>凡客发热纤维披肩盖毯 中灰色<br><span>售价￥88</span></p>
							<div class="tehui">
								23
								
							</div>
							<button class="buy">
								立即购买
							</button>
							<div class="hoverImg">
								<img src="imgQt/hover5.png" alt="" />
							</div>
						</li>
						<li><a href="bigGlass.html"><img src="imgQt/showImg8.jpg" class = 'img1'/></a>
								<p>凡客发热纤维披肩盖毯 中灰色<br><span>售价￥98</span></p>
							<div class="tehui">
								23
							</div>
							<button class="buy">
								立即购买
							</button>
							<div class="hoverImg">
								<img src="imgQt/hover6.png" alt="" />
							</div>
						</li>
						<li><a href="bigGlass.html"><img src="imgQt/showImg9.jpg" class = 'img1'/></a>
								<p>凡客发热纤维披肩盖毯 中灰色<br><span>售价￥56</span></p>
							<div class="tehui">
								23
							</div>
							<button class="buy">
								立即购买
							</button>
							<div class="hoverImg">
								<img src="imgQt/hover4.png" alt="" />
							</div>
						</li>
						<li class = 'liLast1'><a href="bigGlass.html"><img src="imgQt/showImg10.jpg" class = 'img1'/></a>
								<p>凡客发热纤维披肩盖毯 中灰色<br><span>售价￥66</span></p>
								<div class="tehui">
								23
							</div>
							<button class="buy">
								立即购买
							</button>
							<div class="hoverImg">
								<img src="imgQt/hover4.png" alt="" />
							</div>
						</li>
						<li>
							<a href="bigGlass.html">
								<img src="imgQt/showImg.jpg" class = 'img1'/>
							</a>
							<p>凡客发热纤维披肩盖毯 中灰色<br><span>售价￥87</span></p>
							<div class="tehui">
								23
							</div>
							<button class="buy">
								立即购买
							</button>
							<div class="hoverImg">
								<img src="imgQt/hoverImg.png" alt="" />
							</div>
						</li>
					</ul>
				</div>
				<div class="showImg2">
					<img src="imgQt/fandajing2.png" alt="" />
				</div>
						
			<!--服务热线-->
		<div id = 'serve'>
			<div id="serve1">
				<ul>
					<li>
						<p class = 'serveImg'>
							<img src="img/server.png" alt="" />
						</p>
						<p class = 'serveTime'>7X9小时在线客服</p>
					</li>
					<li>
						<p>
							<img src="img/seven.png" alt="" />
						</p>
						<p>7天内退货</p>
						<p> 购物满199元免运费</p>
					</li>
					<li>
						<p>
							<img src="img/erweima.jpg" alt="" style = 'height:100px'/>
						</p>
						<p> 扫描下载凡客客户端</p>
					</li>
				</ul>
			</div>
			
			<div id="guide">
				<ul>
					<li><a href="">关于凡客</a></li>
					<li><a href="">新手指南</a></li>
					<li><a href="">配送范围及时间</a></li>
					<li><a href="">支付方式</a></li>
					<li><a href="">售后服务</a></li>
					<li><a href="">帮助中心</a></li>
				</ul>
				
			</div>
		</div>
		
		
		<!--尾部链接-->
		<div id="footerArea" class="">
			<div class="footBottom">
				<div class="footBottomTab">
					<p> Copyright 2007 - 2018 vancl.com All Rights Reserved 京ICP证100557号 京公网安备11011502002400号 出版物经营许可证新出发京批字第直110138号</p>
					<p> 凡客诚品（北京）科技有限公司</p>
				</div>
			</div>
			<span class="blank20"></span>
		</div>
		
		
		<!--固定栏-->
		<div id = 'fixed'>
			<ul>
				<li>
					<img src="img/fixed_01.png" alt="" />
				</li>
				<li><img src="img/fixed_02.png" alt="" /></li>
				<li><a href=""><img src="img/fixed_03.png" alt="" /></a></li>
			</ul>
			
		</div>
			</div>
			
		</div>
		
	</body>
</html>
<script src = 'js/jquery.min.js'></script>
<script src = 'js/header.js'></script>
<script type="text/javascript">
	//实现登录
	//登录成功后显示商品信息页
	//点南购物车添加购物车信息
	//点击购物车按键，跳转到购物车页面
	//
	
	$('.img1').mouseover(function(){
		$('.hoverImg').hide();					
		$(this).parent().parent()[0].lastElementChild.style.display = 'block';		
	})
	$('.img1').mouseout(function(){
		$('.hoverImg').hide();						
	})
	
	
	var phone = location.search.split('=')[1];
	
	var linka = document.getElementsByClassName('linka')[0];
	var shoping = document.getElementsByClassName('shoping');
	
	console.log(linka);

	linka.href += '?phone='+phone; 
	
	console.log(linka.href);
	window.onload = function(){
		
		var obj = {
			btn : $('.buy'),
			cartGoodsNum : $(".cartGoodsNum"),
			phone : phone,
		}
		new GoShoping(obj);
		console.log(obj.cartGoodsNum);
	}
	
	class GoShoping{
		
		constructor(obj){
			this.btn = obj.btn;
			this.cartGoodsNum = obj.cartGoodsNum;
			this.phone = phone;
			//实现添加购物车
			this.addCart();
		};
		//添加购物车
		addCart(){
		
			var _this = this;
			_this.btn.click(function(){
			
//				console.log($(this).html());
				//点击时，要保存当前商品的编号，商品的数量，每点击一个添加一条数据
				var bid = $(this).parent().index();
				
				
				//bid为商品的下标。
				var obj = [
					{'bid':bid,'count':1}
				];
				//把对象换成json字符串
				var objStr = JSON.stringify(obj);
				
				//不同用户都应该有自己的购物车(localStorage数据);
//				localStorage.getItem(key):获取指定key本地存储的值
				if(!localStorage.getItem(_this.phone+'Goods')){
					
					//当localStorage里面没有任何购物车信息，需要添加某个人的购物车信息					
					localStorage.setItem(_this.phone + 'Goods',objStr);
				}else{
					
					var cartGoods = localStorage.getItem(phone + 'Goods');
					
					var uPhone = localStorage.getItem(_this.phone);
					
					
					var cartGoodsJson = JSON.parse(cartGoods);
					
					//一个控制器，用户判断原来的购物车信息中是没有当前的这个bid商品
					
					console.log(cartGoods);
					var falg = false;	//false表示购物车信息中没有当前的这个bid商品
					
					for(var i = 0; i < cartGoodsJson.length; i++){
						
						if(cartGoodsJson[i].bid == bid){
							
							cartGoodsJson[i].count++;
							falg = true;	//true表示购物车信息中已经存在该数据了
							
						}
					}
					if(!falg){
						//购物车信息中没有当前的这个bid商品.
//						追加一条
						var newBidInfo = {'bid':bid,"count":1};
						
						cartGoodsJson.push(newBidInfo);
						
					}
					//添加到localStorage中
					var cartGoodsJsonToStr = JSON.stringify(cartGoodsJson);
					
					localStorage.setItem(_this.phone + 'Goods', cartGoodsJsonToStr);
				}
				
				//点击添加购物车时计算购物车商品总条数
				_this.getCartCount();
			})
		};
		
		//计算购物车商品总条数
		
		getCartCount(){
			
			var _this = this;
			//购物车信息存在，就可以来计算条数了
			
			if(localStorage.getItem(_this.phone + 'Goods')){
				
				var cartGoods = localStorage.getItem(_this.phone + 'Goods');
				
				var cartGoodsJson = JSON.parse(cartGoods);
				
				var sum = 0;
				
				for(var i = 0; i < cartGoodsJson.length; i++){
					
					sum += cartGoodsJson[i].count;
				}

				this.cartGoodsNum.html(sum);
			}else{
				return;
			}
		}
		
	};
	
	
	
	
	
</script>